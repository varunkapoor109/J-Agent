<%#
  Job Card Component - Dark Theme
  Props:
  - job: { title, company, location, url, salary, confidence, scores }
  - type: 'recommended' | 'exploring'
%>

<div class="card-hover group">
  <!-- Card header -->
  <div class="flex items-start justify-between mb-4">
    <div class="flex items-center">
      <!-- Company logo -->
      <div class="w-12 h-12 rounded-xl bg-gradient-to-br <%= type === 'recommended' ? 'from-success-500/20 to-teal-500/20 border-success-500/30' : 'from-purple-500/20 to-accent-500/20 border-purple-500/30' %> border flex items-center justify-center text-lg font-bold <%= type === 'recommended' ? 'text-success-400' : 'text-purple-400' %>">
        <%= job.company.charAt(0).toUpperCase() %>
      </div>
      <div class="ml-3">
        <p class="font-semibold text-stone-200 text-sm"><%= job.company %></p>
        <p class="text-xs text-stone-500 flex items-center mt-0.5">
          <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
          </svg>
          <%= job.location || 'Remote' %>
        </p>
      </div>
    </div>

    <!-- Confidence badge -->
    <span class="px-2.5 py-1 rounded-full text-xs font-semibold <%= type === 'recommended' ? 'bg-success-500/20 text-success-400 border border-success-500/30' : 'bg-purple-500/20 text-purple-400 border border-purple-500/30' %>">
      <%= job.confidence %>%
    </span>
  </div>

  <!-- Job title -->
  <h3 class="font-bold text-stone-100 text-lg mb-2 group-hover:text-accent-400 transition-colors leading-tight">
    <%= job.title %>
  </h3>

  <!-- Salary -->
  <% if (job.salary) { %>
  <p class="text-sm text-stone-400 mb-4 flex items-center">
    <svg class="w-4 h-4 mr-1.5 text-stone-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <%= job.salary %>
  </p>
  <% } else { %>
  <div class="mb-4"></div>
  <% } %>

  <!-- Match indicators -->
  <div class="flex items-center gap-4 text-xs text-stone-500 mb-5">
    <div class="flex items-center" title="Role alignment">
      <div class="w-2 h-2 rounded-full mr-1.5 <%= job.scores?.role >= 70 ? 'bg-success-500' : 'bg-stone-600' %>"></div>
      Role
    </div>
    <div class="flex items-center" title="Experience level match">
      <div class="w-2 h-2 rounded-full mr-1.5 <%= job.scores?.experience >= 70 ? 'bg-success-500' : 'bg-stone-600' %>"></div>
      Level
    </div>
    <div class="flex items-center" title="Skills match">
      <div class="w-2 h-2 rounded-full mr-1.5 <%= job.scores?.content >= 70 ? 'bg-success-500' : 'bg-stone-600' %>"></div>
      Skills
    </div>
  </div>

  <!-- CTA Button -->
  <a
    href="<%= job.url %>"
    target="_blank"
    rel="noopener noreferrer"
    class="w-full inline-flex items-center justify-center px-4 py-3 text-sm font-medium rounded-xl text-stone-300 bg-dark-700 border border-stone-600/50 hover:bg-dark-600 hover:border-accent-500/50 hover:text-accent-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-dark-800 focus:ring-accent-500 transition-all duration-200 group/btn"
  >
    View Position
    <svg class="w-4 h-4 ml-2 group-hover/btn:translate-x-0.5 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
    </svg>
  </a>
</div>
